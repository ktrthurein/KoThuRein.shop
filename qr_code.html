<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<title>Myanmar + English QR Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>

<style>
body{
    font-family: Pyidaungsu, Myanmar3, sans-serif;
    background:#f2f4f7;
    padding:20px;
}
.container{
    max-width:850px;
    margin:auto;
    background:#fff;
    border-radius:12px;
    box-shadow:0 8px 20px rgba(0,0,0,.1);
}
header{
    background:linear-gradient(135deg,#6a11cb,#2575fc);
    color:#fff;
    padding:20px;
    text-align:center;
}
.main{
    display:flex;
    flex-wrap:wrap;
    padding:20px;
}
.left,.right{
    flex:1;
    min-width:280px;
    padding:20px;
}
label{font-weight:bold;}
textarea,select{
    width:100%;
    margin-top:8px;
    padding:12px;
    font-size:16px;
    border-radius:8px;
    border:1px solid #ccc;
}
textarea{min-height:110px;}

button{
    padding:14px;
    border:none;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
}
.generate{background:#6a11cb;color:#fff;}
.download{background:#2575fc;color:#fff;}
.download:disabled{background:#aaa;}

.qr-wrapper{
    width:280px;
    height:280px;
    margin:auto;
    position:relative;
    border:2px dashed #ccc;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.qr-wrapper canvas{
    width:100%;
    height:100%;
}
.qr-logo{
    position:absolute;
    width:60px;
    height:60px;
    background:#fff;
    padding:6px;
    border-radius:10px;
    display:none;
}
.info{text-align:center;margin-top:15px;font-size:14px;color:#555;}

footer{
    text-align:center;
    font-size:13px;
    padding:15px;
    border-top:1px solid #eee;
    color:#666;
}
</style>
</head>

<body>

<div class="container">
<header>
<h2>မြန်မာ + English QR Code Generator</h2>
<p>ဇော်ဖော် nsa001 လို စာတွေပါ အပြည့်အဝ Support</p>
</header>

<div class="main">
<div class="left">
<label>QR Code စာ</label>
<textarea id="qrText">ဇော်ဖော် nsa001</textarea>

<label style="margin-top:15px;">အရွယ်အစား</label>
<select id="qrSize">
<option value="200">200 x 200</option>
<option value="250" selected>250 x 250</option>
<option value="300">300 x 300</option>
</select>

<div style="margin-top:20px;display:flex;gap:12px;">
<button class="generate" onclick="generateQR()">QR Code ထုတ်ပါ</button>
<button class="download" id="downloadBtn" onclick="downloadQR()" disabled>PNG သိမ်းပါ</button>
</div>
</div>

<div class="right">
<div class="qr-wrapper" id="qrBox">
    QR Preview
    <img src="logo.png" id="logoImg" class="qr-logo">
</div>
<div class="info" id="infoText">QR Code မထုတ်ရသေးပါ</div>
</div>
</div>

<footer>
UTF-8 Myanmar / English QR Generator
</footer>
</div>

<script>
/* ================= SETTINGS ================= */
const ENABLE_LOGO = true;   // true = logo ပါ | false = logo မပါ
/* =========================================== */

const qrBox = document.getElementById('qrBox');
const logoImg = document.getElementById('logoImg');
const infoText = document.getElementById('infoText');
const downloadBtn = document.getElementById('downloadBtn');
let qrDataUrl = '';

async function generateQR(){
    const text = document.getElementById('qrText').value.trim();
    const size = parseInt(document.getElementById('qrSize').value);

    if(!text){ alert("စာထည့်ပါ"); return; }

    qrBox.innerHTML = '';
    qrBox.appendChild(logoImg);

    const canvas = document.createElement('canvas');

    await QRCode.toCanvas(canvas, text, {
        width: size,
        errorCorrectionLevel: 'H', // Logo အတွက် အရေးကြီး
        margin: 2
    });

    qrBox.insertBefore(canvas, logoImg);
    qrDataUrl = canvas.toDataURL('image/png');
    downloadBtn.disabled = false;

    /* Logo true / false */
    if(ENABLE_LOGO){
        logoImg.style.display = 'block';
    }else{
        logoImg.style.display = 'none';
    }

    const mm = (text.match(/[\u1000-\u109F]/g) || []).length;

    infoText.innerHTML = `
        စာ: ${text}<br>
        စာလုံးရေ: ${text.length}<br>
        မြန်မာစာ: ${mm}<br>
        Logo: ${ENABLE_LOGO ? 'ON' : 'OFF'}
    `;
}

function downloadQR(){
    if(!qrDataUrl) return;
    const a = document.createElement('a');
    a.href = qrDataUrl;
    a.download = 'myanmar-mix-qr.png';
    a.click();
}

window.onload = generateQR;
</script>

</body>
</html>
