<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator with Plain Text</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.8rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .download-button {
            display: inline-block;
            background: linear-gradient(to right, #3498db, #2c3e50);
            color: white;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            text-decoration: none;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .download-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.5);
        }
        
        .download-button i {
            margin-right: 10px;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 30px;
        }
        
        .left-panel {
            flex: 1;
            min-width: 400px;
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .right-panel {
            flex: 1;
            min-width: 400px;
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .panel-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f1f1;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input[type="text"], input[type="url"] {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, input[type="url"]:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .plaintext-area {
            width: 100%;
            height: 150px;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            resize: vertical;
            transition: border-color 0.3s;
            line-height: 1.5;
        }
        
        .plaintext-area:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .color-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 3px solid transparent;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.active {
            border-color: #2c3e50;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }
        
        .option-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .option-btn {
            padding: 12px 20px;
            background-color: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            flex-grow: 1;
            text-align: center;
        }
        
        .option-btn:hover {
            background-color: #e9ecef;
        }
        
        .option-btn.active {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .logo-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            border: 3px dashed #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: border-color 0.3s;
            position: relative;
        }
        
        .logo-upload:hover {
            border-color: #3498db;
        }
        
        .logo-upload i {
            font-size: 3rem;
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .logo-toggle {
            display: flex;
            align-items: center;
            margin-top: 15px;
            justify-content: center;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            margin: 0 15px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #2ecc71;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        .toggle-label {
            font-weight: 600;
            color: #555;
        }
        
        .qr-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
        }
        
        #qrCode {
            width: 280px;
            height: 280px;
            margin: 20px auto;
            background-color: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            border: 2px dashed #ddd;
            position: relative;
        }
        
        #qrCode img {
            max-width: 100%;
            max-height: 100%;
        }
        
        .logo-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background-color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 10;
        }
        
        .logo-overlay i {
            font-size: 2rem;
            color: #3498db;
        }
        
        .preview-text {
            text-align: center;
            margin-top: 20px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-save {
            background: linear-gradient(to right, #2ecc71, #27ae60);
            color: white;
        }
        
        .btn-reset {
            background: linear-gradient(to right, #e74c3c, #c0392b);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .status-debug-container {
            margin-top: 30px;
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #3498db;
        }
        
        .status-section, .debug-section {
            margin-bottom: 20px;
        }
        
        .status-title, .debug-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-title i {
            color: #2ecc71;
        }
        
        .debug-title i {
            color: #e74c3c;
        }
        
        .status-content, .debug-content {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            border: 1px solid #e0e0e0;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .debug-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #eee;
        }
        
        .debug-label {
            color: #7f8c8d;
            font-weight: 600;
        }
        
        .debug-value {
            color: #2c3e50;
            font-weight: 600;
        }
        
        .debug-value.success {
            color: #27ae60;
        }
        
        .debug-value.error {
            color: #e74c3c;
        }
        
        .debug-value.warning {
            color: #f39c12;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .left-panel, .right-panel {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>QR Code Generator with Plain Text</h1>
            <p class="subtitle">Generate QR codes from plain text, URLs, or any data. Scanner မှာ "ဇော်ဖော်, nsa001" စာသားတွေ အတိအကျအမှန်အကန် ဖတ်ရှုနိုင်ပါမည်။</p>
            <a href="#" class="download-button" id="downloadAllBtn">
                <i class="fas fa-download"></i> Download Complete Code
            </a>
        </header>
        
        <div class="content">
            <div class="left-panel">
                <h2 class="panel-title">QR Code Settings</h2>
                
                <div class="input-group">
                    <label for="plaintextInput">Plain Text / Data</label>
                    <textarea class="plaintext-area" id="plaintextInput" placeholder="Enter text, URL, or data here...">ဇော်ဖော်, nsa001
https://www.youtube.com/@techwebchain/videos
Phone: 09-123456789
Location: Yangon, Myanmar</textarea>
                    <div style="font-size: 0.85rem; color: #7f8c8d; margin-top: 5px;">
                        QR code scanner မှာ ဖတ်ရင် ဤစာသားအတိုင်း အတိအကျပေါ်ပါမည်။
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Colors</label>
                    <div class="color-options">
                        <div class="color-option active" style="background-color: #000000;" data-color="#000000"></div>
                        <div class="color-option" style="background-color: #3498db;" data-color="#3498db"></div>
                        <div class="color-option" style="background-color: #2ecc71;" data-color="#2ecc71"></div>
                        <div class="color-option" style="background-color: #e74c3c;" data-color="#e74c3c"></div>
                        <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
                        <div class="color-option" style="background-color: #f39c12;" data-color="#f39c12"></div>
                        <div class="color-option" style="background-color: #1abc9c;" data-color="#1abc9c"></div>
                        <div class="color-option" style="background-color: #34495e;" data-color="#34495e"></div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Design</label>
                    <div class="option-group">
                        <div class="option-btn active" data-design="standard">Standard</div>
                        <div class="option-btn" data-design="rounded">Rounded</div>
                        <div class="option-btn" data-design="dots">Dots</div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Logo Center</label>
                    <div class="logo-upload" id="logoUpload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Click to upload logo</span>
                        <input type="file" id="logoFile" accept="image/*" style="display: none;">
                    </div>
                    <div class="logo-toggle">
                        <span class="toggle-label">Logo OFF</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="logoToggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label">Logo ON</span>
                    </div>
                    <div style="font-size: 0.85rem; color: #7f8c8d; margin-top: 10px; text-align: center;">
                        Toggle ကို ON လုပ်ပြီး logo ကို QR code အလယ်မှာ ထည့်နိုင်ပါသည်
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Frame</label>
                    <div class="option-group">
                        <div class="option-btn active" data-frame="none">None</div>
                        <div class="option-btn" data-frame="square">Square</div>
                        <div class="option-btn" data-frame="circle">Circle</div>
                        <div class="option-btn" data-frame="rounded">Rounded</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-save" id="saveBtn">
                        <i class="fas fa-save"></i> Save QR Code
                    </button>
                    <button class="btn btn-reset" id="resetBtn">
                        <i class="fas fa-redo"></i> Reset All
                    </button>
                </div>
            </div>
            
            <div class="right-panel">
                <h2 class="panel-title">QR Code Preview</h2>
                
                <div class="qr-container">
                    <div id="qrCode">
                        <p>Your QR code will appear here</p>
                    </div>
                    <p class="preview-text">Preview of your QR code. Scanner မှာ အောက်က plain text အတိုင်း ဖတ်ရှုရပါမည်။</p>
                </div>
                
                <div class="status-debug-container">
                    <div class="status-section">
                        <div class="status-title">
                            <i class="fas fa-check-circle"></i> Status:
                        </div>
                        <div class="status-content" id="statusContent">
QR Code generated successfully!
Data length: 112 characters
Encoding: UTF-8
Error correction: High (H)
Ready to scan.
                        </div>
                    </div>
                    
                    <div class="debug-section">
                        <div class="debug-title">
                            <i class="fas fa-bug"></i> Debug Information:
                        </div>
                        <div class="debug-content">
                            <div class="debug-item">
                                <span class="debug-label">QR Version:</span>
                                <span class="debug-value success" id="debugVersion">4</span>
                            </div>
                            <div class="debug-item">
                                <span class="debug-label">Modules:</span>
                                <span class="debug-value" id="debugModules">33x33</span>
                            </div>
                            <div class="debug-item">
                                <span class="debug-label">Logo Enabled:</span>
                                <span class="debug-value warning" id="debugLogo">No</span>
                            </div>
                            <div class="debug-item">
                                <span class="debug-label">Color:</span>
                                <span class="debug-value" id="debugColor">#000000</span>
                            </div>
                            <div class="debug-item">
                                <span class="debug-label">Design:</span>
                                <span class="debug-value" id="debugDesign">Standard</span>
                            </div>
                            <div class="debug-item">
                                <span class="debug-label">Frame:</span>
                                <span class="debug-value" id="debugFrame">None</span>
                            </div>
                            <div class="debug-item">
                                <span class="debug-label">Last Generated:</span>
                                <span class="debug-value" id="debugTime">Just now</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script>
        // Initialize variables
        let qrCode = null;
        let currentColor = "#000000";
        let currentDesign = "standard";
        let currentFrame = "none";
        let uploadedLogo = null;
        let logoEnabled = false;
        let lastGeneratedTime = new Date();
        
        // Initialize the QR code
        function initQRCode() {
            const plaintext = document.getElementById('plaintextInput').value;
            const qrElement = document.getElementById('qrCode');
            
            // Clear previous QR code
            qrElement.innerHTML = '';
            
            // Calculate QR code version based on text length
            const textLength = plaintext.length;
            let qrVersion = 4; // Default version
            
            if (textLength > 150) qrVersion = 6;
            else if (textLength > 100) qrVersion = 5;
            else if (textLength > 50) qrVersion = 4;
            else if (textLength > 25) qrVersion = 3;
            else qrVersion = 2;
            
            // Calculate module size based on version
            const moduleSize = 21 + (qrVersion - 1) * 4;
            
            // Create new QR code
            qrCode = new QRCode(qrElement, {
                text: plaintext || "QR Code Generator",
                width: 250,
                height: 250,
                colorDark: currentColor,
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H,
                useSVG: false
            });
            
            // Update debug info
            updateDebugInfo(qrVersion, moduleSize);
            
            // Update status
            updateStatus(textLength);
            
            // Apply design after a short delay (to ensure QR code is rendered)
            setTimeout(() => {
                applyDesign();
                
                // Apply logo if enabled
                if (logoEnabled && uploadedLogo) {
                    applyLogo();
                } else if (logoEnabled) {
                    // Show default checkmark if logo is enabled but no image uploaded
                    showDefaultLogo();
                }
                
                // Apply frame
                applyFrame();
            }, 100);
            
            // Update time
            lastGeneratedTime = new Date();
            document.getElementById('debugTime').textContent = formatTime(lastGeneratedTime);
        }
        
        // Apply design to QR code
        function applyDesign() {
            const qrCodeCanvas = document.querySelector('#qrCode canvas');
            if (!qrCodeCanvas) return;
            
            const ctx = qrCodeCanvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, qrCodeCanvas.width, qrCodeCanvas.height);
            const data = imageData.data;
            
            if (currentDesign === "rounded") {
                // Make QR code modules rounded
                for (let i = 0; i < data.length; i += 4) {
                    // Skip transparent pixels
                    if (data[i+3] === 0) continue;
                    
                    // Check if pixel is part of a module (dark pixel)
                    if (data[i] < 128) {
                        // Make corners transparent to create rounded effect
                        const x = (i/4) % qrCodeCanvas.width;
                        const y = Math.floor((i/4) / qrCodeCanvas.width);
                        
                        // Check if we're near the edge of a module
                        const moduleSize = 8;
                        const inCorner = (x % moduleSize < 2 || x % moduleSize > moduleSize - 3) && 
                                         (y % moduleSize < 2 || y % moduleSize > moduleSize - 3);
                        
                        if (inCorner) {
                            data[i+3] = 0;
                        }
                    }
                }
                
                ctx.putImageData(imageData, 0, 0);
            } else if (currentDesign === "dots") {
                // Make QR code modules dots
                for (let i = 0; i < data.length; i += 4) {
                    // Skip transparent pixels
                    if (data[i+3] === 0) continue;
                    
                    // Check if pixel is part of a module (dark pixel)
                    if (data[i] < 128) {
                        const x = (i/4) % qrCodeCanvas.width;
                        const y = Math.floor((i/4) / qrCodeCanvas.width);
                        
                        // Check if we're near the center of a module
                        const moduleSize = 8;
                        const inCenter = (x % moduleSize > 2 && x % moduleSize < moduleSize - 3) && 
                                         (y % moduleSize > 2 && y % moduleSize < moduleSize - 3);
                        
                        if (!inCenter) {
                            data[i+3] = 0;
                        }
                    }
                }
                
                ctx.putImageData(imageData, 0, 0);
            }
        }
        
        // Apply frame to QR code container
        function applyFrame() {
            const qrElement = document.getElementById('qrCode');
            
            // Reset any previous frame classes
            qrElement.classList.remove('frame-square', 'frame-circle', 'frame-rounded');
            
            // Apply new frame class
            if (currentFrame === "square") {
                qrElement.classList.add('frame-square');
                qrElement.style.border = "15px solid #2c3e50";
                qrElement.style.borderRadius = "0";
            } else if (currentFrame === "circle") {
                qrElement.classList.add('frame-circle');
                qrElement.style.border = "15px solid #3498db";
                qrElement.style.borderRadius = "50%";
            } else if (currentFrame === "rounded") {
                qrElement.classList.add('frame-rounded');
                qrElement.style.border = "15px solid #2ecc71";
                qrElement.style.borderRadius = "25px";
            } else {
                qrElement.style.border = "2px dashed #ddd";
                qrElement.style.borderRadius = "10px";
            }
        }
        
        // Apply logo to QR code
        function applyLogo() {
            if (!uploadedLogo || !logoEnabled) return;
            
            const qrElement = document.getElementById('qrCode');
            const canvas = qrElement.querySelector('canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Create logo image
            const logoImg = new Image();
            logoImg.onload = function() {
                // Calculate position to center logo
                const logoSize = 50;
                const x = (canvas.width - logoSize) / 2;
                const y = (canvas.height - logoSize) / 2;
                
                // Draw white background for logo
                ctx.fillStyle = "#ffffff";
                ctx.fillRect(x-5, y-5, logoSize+10, logoSize+10);
                
                // Draw logo
                ctx.drawImage(logoImg, x, y, logoSize, logoSize);
            };
            
            logoImg.src = uploadedLogo;
        }
        
        // Show default checkmark logo
        function showDefaultLogo() {
            const qrElement = document.getElementById('qrCode');
            
            // Remove existing logo overlay
            const existingOverlay = qrElement.querySelector('.logo-overlay');
            if (existingOverlay) {
                existingOverlay.remove();
            }
            
            // Add default logo overlay
            if (logoEnabled) {
                const logoOverlay = document.createElement('div');
                logoOverlay.className = 'logo-overlay';
                logoOverlay.innerHTML = '<i class="fas fa-check"></i>';
                qrElement.appendChild(logoOverlay);
            }
        }
        
        // Update debug information
        function updateDebugInfo(version, modules) {
            document.getElementById('debugVersion').textContent = version;
            document.getElementById('debugModules').textContent = `${modules}x${modules}`;
            document.getElementById('debugLogo').textContent = logoEnabled ? 'Yes' : 'No';
            document.getElementById('debugLogo').className = logoEnabled ? 'debug-value success' : 'debug-value warning';
            document.getElementById('debugColor').textContent = currentColor;
            document.getElementById('debugDesign').textContent = currentDesign.charAt(0).toUpperCase() + currentDesign.slice(1);
            document.getElementById('debugFrame').textContent = currentFrame.charAt(0).toUpperCase() + currentFrame.slice(1);
        }
        
        // Update status information
        function updateStatus(textLength) {
            const statusContent = document.getElementById('statusContent');
            const plaintext = document.getElementById('plaintextInput').value;
            
            statusContent.textContent = `QR Code generated successfully!
Data length: ${textLength} characters
Encoding: UTF-8
Error correction: High (H)
Scan result will show: "${plaintext.substring(0, 50)}${textLength > 50 ? '...' : ''}"
Ready to scan.`;
        }
        
        // Format time for display
        function formatTime(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffSec = Math.floor(diffMs / 1000);
            
            if (diffSec < 10) return 'Just now';
            if (diffSec < 60) return `${diffSec} seconds ago`;
            
            const diffMin = Math.floor(diffSec / 60);
            if (diffMin < 60) return `${diffMin} minute${diffMin > 1 ? 's' : ''} ago`;
            
            const diffHour = Math.floor(diffMin / 60);
            if (diffHour < 24) return `${diffHour} hour${diffHour > 1 ? 's' : ''} ago`;
            
            return date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }
        
        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize QR code
            initQRCode();
            
            // Plain text input change
            document.getElementById('plaintextInput').addEventListener('input', function() {
                initQRCode();
            });
            
            // Color selection
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentColor = this.getAttribute('data-color');
                    initQRCode();
                });
            });
            
            // Design selection
            document.querySelectorAll('[data-design]').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('[data-design]').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentDesign = this.getAttribute('data-design');
                    initQRCode();
                });
            });
            
            // Frame selection
            document.querySelectorAll('[data-frame]').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('[data-frame]').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentFrame = this.getAttribute('data-frame');
                    applyFrame();
                    updateDebugInfo(parseInt(document.getElementById('debugVersion').textContent), 
                                  parseInt(document.getElementById('debugModules').textContent));
                });
            });
            
            // Logo upload
            document.getElementById('logoUpload').addEventListener('click', function() {
                document.getElementById('logoFile').click();
            });
            
            document.getElementById('logoFile').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        uploadedLogo = event.target.result;
                        
                        // Update logo upload area
                        const logoUpload = document.getElementById('logoUpload');
                        logoUpload.innerHTML = `
                            <i class="fas fa-check-circle" style="color: #2ecc71;"></i>
                            <span>Logo uploaded</span>
                        `;
                        
                        // Enable logo toggle
                        document.getElementById('logoToggle').checked = true;
                        logoEnabled = true;
                        
                        // Apply logo to QR code
                        initQRCode();
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Logo toggle
            document.getElementById('logoToggle').addEventListener('change', function() {
                logoEnabled = this.checked;
                
                if (logoEnabled && !uploadedLogo) {
                    showDefaultLogo();
                } else if (!logoEnabled) {
                    // Remove logo overlay
                    const qrElement = document.getElementById('qrCode');
                    const logoOverlay = qrElement.querySelector('.logo-overlay');
                    if (logoOverlay) {
                        logoOverlay.remove();
                    }
                    
                    // Redraw QR code without logo
                    const canvas = qrElement.querySelector('canvas');
                    if (canvas) {
                        initQRCode();
                    }
                }
                
                // Update debug info
                updateDebugInfo(parseInt(document.getElementById('debugVersion').textContent), 
                              parseInt(document.getElementById('debugModules').textContent));
            });
            
            // Save QR code
            document.getElementById('saveBtn').addEventListener('click', function() {
                const qrElement = document.getElementById('qrCode');
                const canvas = qrElement.querySelector('canvas');
                
                if (canvas) {
                    // Create temporary canvas to add logo if enabled
                    const tempCanvas = document.createElement('canvas');
                    const tempCtx = tempCanvas.getContext('2d');
                    
                    // Set canvas size
                    tempCanvas.width = 300;
                    tempCanvas.height = 300;
                    
                    // Fill with white background
                    tempCtx.fillStyle = '#ffffff';
                    tempCtx.fillRect(0, 0, 300, 300);
                    
                    // Draw QR code centered
                    tempCtx.drawImage(canvas, 25, 25, 250, 250);
                    
                    // Add logo if enabled and exists
                    if (logoEnabled && uploadedLogo) {
                        const logoImg = new Image();
                        logoImg.onload = function() {
                            const logoSize = 40;
                            const x = (tempCanvas.width - logoSize) / 2;
                            const y = (tempCanvas.height - logoSize) / 2;
                            
                            // Draw white background for logo
                            tempCtx.fillStyle = "#ffffff";
                            tempCtx.fillRect(x-5, y-5, logoSize+10, logoSize+10);
                            
                            // Draw logo
                            tempCtx.drawImage(logoImg, x, y, logoSize, logoSize);
                            
                            // Create download link
                            const link = document.createElement('a');
                            link.download = 'qr-code-' + Date.now() + '.png';
                            link.href = tempCanvas.toDataURL('image/png');
                            link.click();
                            
                            // Show success message
                            alert('QR code saved successfully as ' + link.download);
                        };
                        logoImg.src = uploadedLogo;
                    } else if (logoEnabled) {
                        // Add default checkmark
                        const logoSize = 40;
                        const x = (tempCanvas.width - logoSize) / 2;
                        const y = (tempCanvas.height - logoSize) / 2;
                        
                        // Draw white background for logo
                        tempCtx.fillStyle = "#ffffff";
                        tempCtx.fillRect(x-5, y-5, logoSize+10, logoSize+10);
                        
                        // Draw checkmark
                        tempCtx.fillStyle = "#3498db";
                        tempCtx.font = "30px FontAwesome";
                        tempCtx.textAlign = "center";
                        tempCtx.textBaseline = "middle";
                        tempCtx.fillText("✓", x + logoSize/2, y + logoSize/2);
                        
                        // Create download link
                        const link = document.createElement('a');
                        link.download = 'qr-code-' + Date.now() + '.png';
                        link.href = tempCanvas.toDataURL('image/png');
                        link.click();
                        
                        // Show success message
                        alert('QR code saved successfully as ' + link.download);
                    } else {
                        // Create download link without logo
                        const link = document.createElement('a');
                        link.download = 'qr-code-' + Date.now() + '.png';
                        link.href = tempCanvas.toDataURL('image/png');
                        link.click();
                        
                        // Show success message
                        alert('QR code saved successfully as ' + link.download);
                    }
                }
            });
            
            // Reset all
            document.getElementById('resetBtn').addEventListener('click', function() {
                // Reset plain text
                document.getElementById('plaintextInput').value = "ဇော်ဖော်, nsa001\nhttps://www.youtube.com/@techwebchain/videos\nPhone: 09-123456789\nLocation: Yangon, Myanmar";
                
                // Reset color
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                document.querySelector('.color-option').classList.add('active');
                currentColor = "#000000";
                
                // Reset design
                document.querySelectorAll('[data-design]').forEach(opt => opt.classList.remove('active'));
                document.querySelector('[data-design="standard"]').classList.add('active');
                currentDesign = "standard";
                
                // Reset frame
                document.querySelectorAll('[data-frame]').forEach(opt => opt.classList.remove('active'));
                document.querySelector('[data-frame="none"]').classList.add('active');
                currentFrame = "none";
                
                // Reset logo
                uploadedLogo = null;
                logoEnabled = false;
                document.getElementById('logoToggle').checked = false;
                const logoUpload = document.getElementById('logoUpload');
                logoUpload.innerHTML = `
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Click to upload logo</span>
                `;
                
                // Reinitialize QR code
                initQRCode();
            });
            
            // Download all code button
            document.getElementById('downloadAllBtn').addEventListener('click', function(e) {
                e.preventDefault();
                
                // Create a zip file simulation
                alert('Downloading complete code package... This would normally download a ZIP file containing HTML, CSS, JS, and assets.');
                
                // In a real implementation, this would trigger a server-side script
                // to create and download a ZIP file
            });
        });
    </script>
</body>
</html>
